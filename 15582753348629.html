<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  qiqi 20200313 - 语时lab
  
  </title>
  
  
  <link href="atom.xml" rel="alternate" title="语时lab" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site:cshishaliu.github.io ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="_self" href="index.html">Home</a></li>
        
        <li id=""><a target="_self" href="book.html">Books</a></li>
        
        <li id=""><a target="_self" href="links.html">Links</a></li>
        
        <li id=""><a target="_self" href="archives.html">Archives</a></li>
        
        <li id=""><a target="_self" href="about.html">About</a></li>
        
        <li id=""><a target="_self" href="todo.html">Todo</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="https://google.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; 语时lab</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
        
        <li><a target="_self" href="index.html">Home</a></li>
        
        <li><a target="_self" href="book.html">Books</a></li>
        
        <li><a target="_self" href="links.html">Links</a></li>
        
        <li><a target="_self" href="archives.html">Archives</a></li>
        
        <li><a target="_self" href="about.html">About</a></li>
        
        <li><a target="_self" href="todo.html">Todo</a></li>
        

    <li><label>Categories</label></li>

        
            <li><a href="%E7%AD%94%E7%96%91&%E8%A7%A3%E9%A2%98.html">答疑&解题</a></li>
        
            <li><a href="To%20be%20accomplished.html">To be accomplished</a></li>
        
            <li><a href="To%20be%20fixed.html">To be fixed</a></li>
        
            <li><a href="Long%20long%20ago.html">Long long ago</a></li>
        
            <li><a href="misc.html">misc</a></li>
         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
  $(function(){
    $('#menu_item_index').addClass('is_active');
  });
</script>
<div class="row">
  <div class="large-8 medium-8 columns">
      <div class="markdown-body article-wrap">
       <div class="article">
          
          <h1>qiqi 20200313</h1>
     
        <div class="read-more clearfix">
          <span class="date">2019/05/19</span>

          <span>posted in&nbsp;</span> 
          
              <span class="posted-in"><a href='To%20be%20accomplished.html'>To be accomplished</a></span>
           
         
          <span class="comments">
            

            
          </span>

        </div>
      </div><!-- article -->

      <div class="article-content">
      <p><mark>TODO 本篇尚未完成</mark></p>

<p><img src="https://i.loli.net/2020/03/13/Mgn5Ni7fQorOx9h.png" alt="image-20200313084831995"/><br/>
<span id="more"></span><!-- more --></p>

<h2 id="toc_0">Answer</h2>

<h3 id="toc_1">(a)</h3>

<h4 id="toc_2">(a).i</h4>

<p>Consider a permutation starts with \(m\), if it has head length \(1\), then \(m\) must be greater than \(1\), and the second term of the permutation must be less than \(m\). </p>

<p>Therefore, the total number of permutations starts with \(m\) and has head length \(1\) is<br/>
\[<br/>
(m-1) \cdot A_{n-2}^{n-2} = (m-1) \cdot (n-2)!<br/>
\]<br/>
And the total number of permutations (starts with whatever and) has head length \(1\) is<br/>
\[<br/>
\sum_{m=2}^n (m-1) \cdot (n-2)! = \frac{n(n-1)}2 \cdot (n-2)! = \frac{n!}2<br/>
\]<br/>
This seems to be reasonable. Because, consider two permutations, of which the first two terms exchange their order and the rest are all the same, one of them has head length \(1\), and the other does not. So, exactly <strong>a half</strong> of all the permutations has head length \(1\).</p>

<h4 id="toc_3">(a).ii</h4>

<h4 id="toc_4">(a).iii</h4>

<h3 id="toc_5">(b)</h3>

<p>记 head length 为 \(k\), 显然 \(k \le n+1\).</p>

<ul>
<li><p>当 \(k = n+1\) 时, 这种排列只有一个: \(1,1,2,3,\dots,n\);</p></li>
<li><p>当 \(k &lt; n+1\) 即 \(k \le n\) 时, 第 \(k\) 项记作 \(m\), 它必须严格大于第 \(k+1\) 项, 且不小于第 \(1,2, \dots, k-1\) 项, 因此必定有 \(m \ge k\).</p>
<p>讨论可得, head length 为 \(k\), 且第 \(k\) 项等于 \(m\) 的 permutation 的个数为<br/>
\[<br/>
f(k,m) = C_{m-2}^{k-2} \cdot (k-1) + C_{m-1}^k \cdot k<br/>
\]<br/>
其中 \(1 \le k \le m \le n\).</p></li>
</ul>

<p>于是, 所有 permutation 的总个数为<br/>
\[<br/>
1 + \sum_{k=1}^n \left( \sum_{m=k}^n f(k,m) \right),<br/>
\]<br/>
这个和式的化简结果应该是 \(\frac{(n+1)!}2\) (<mark>此结论待验证</mark>), 即 \(1,1,2,\dots,n\) 所能形成的所有排列个数.</p>

<p>考虑<br/>
\[<br/>
\begin{aligned}<br/>
\sum_{k=1}^n \left( \sum_{m=k}^n f(k,m) \right)<br/>
&amp;= \sum_{k=1}^n \sum_{m=k}^n \left( C_{m-2}^{k-2} \cdot (k-1) + C_{m-1}^k \cdot k \right) \\<br/>
&amp;= \sum_{m=1}^n \sum_{k=1}^m \left( C_{m-2}^{k-2} \cdot (k-1) + C_{m-1}^k \cdot k \right) \\<br/>
\end{aligned}<br/>
\]</p>

<p>另一方面, 所有 permutation 的 head length 的总和为<br/>
\[<br/>
(n+1) + \sum_{k=1}^n \left( k \cdot \sum_{m=k}^n f(k,m) \right)<br/>
\]</p>

<p>\[<br/>
\begin{aligned}<br/>
\sum_{k=1}^n \left( \frac kn \cdot \sum_{m=k}^n f(k,m) \right)<br/>
&amp;= \sum_{k=1}^n \left( \frac kn \cdot \sum_{m=k}^n \left( C_{m-2}^{k-2} \cdot (k-1) + C_{m-1}^k \cdot k \right) \right) \\<br/>
&amp;= \frac1n \cdot \sum_{k=1}^n \sum_{m=k}^n \left( k \cdot \left( C_{m-2}^{k-2} \cdot (k-1) + C_{m-1}^k \cdot k \right) \right) \\<br/>
&amp;= \frac1n \cdot \sum_{m=1}^n \sum_{k=1}^m \left( k \cdot \left( C_{m-2}^{k-2} \cdot (k-1) + C_{m-1}^k \cdot k \right) \right)<br/>
\end{aligned}<br/>
\]</p>

<p>\[<br/>
\begin{aligned}<br/>
\sum_{k=1}^m \left( k \cdot \left( C_{m-2}^{k-2} \cdot (k-1) + C_{m-1}^k \cdot k \right) \right)<br/>
&amp;= \sum_{k=1}^m \left( C_{m-2}^{k-2} \cdot k(k-1) + C_{m-1}^k \cdot k^2 \right)<br/>
\end{aligned}<br/>
\]</p>

<p>\[<br/>
\begin{aligned}<br/>
C_{m-2}^{k-2} \cdot k(k-1)<br/>
&amp;= C_{m-2}^{k-2} \cdot (k^2-k) \\<br/>
&amp;= C_{m-2}^{k-2} \cdot [(k^2 - 5k + 6) + (4k - 8) + 2] \\<br/>
&amp;= C_{m-2}^{k-2} \cdot (k-2)(k-3) + 4 C_{m-2}^{k-2} \cdot (k-2) + 2 C_{m-2}^{k-2} \\<br/>
&amp;= (m-2)(m-3) C_{m-4}^{k-4} + 4 (m-2) C_{m-3}^{k-3} + 2 C_{m-2}^{k-2} <br/>
\\[1em]<br/>
C_{m-1}^k \cdot k^2<br/>
&amp;= C_{m-1}^k \cdot [(k^2 - k) + k] \\<br/>
&amp;= C_{m-1}^k \cdot k (k - 1) + C_{m-1}^k \cdot k \\<br/>
&amp;= (m-1)(m-2) C_{m-3}^{k-2} + (m-1) C_{m-2}^{k-1}<br/>
\end{aligned}<br/>
\]</p>

<p>\[<br/>
\begin{aligned}<br/>
&amp;\sum_{k=1}^m \left( C_{m-2}^{k-2} \cdot k(k-1) + C_{m-1}^k \cdot k^2 \right)\\<br/>
{}={}<br/>
&amp;\sum_{k=1}^m (m-2)(m-3) C_{m-4}^{k-4} + <br/>
\sum_{k=1}^m 4 (m-2) C_{m-3}^{k-3} + <br/>
\sum_{k=1}^m 2 C_{m-2}^{k-2} \\<br/>
&amp;{} + \sum_{k=1}^m (m-1)(m-2) C_{m-3}^{k-2} + <br/>
\sum_{k=1}^m (m-1) C_{m-2}^{k-1} \\<br/>
{}={}<br/>
&amp;(m-2)(m-3) \sum_{k=1}^m C_{m-4}^{k-4} + <br/>
4 (m-2) \sum_{k=1}^m C_{m-3}^{k-3} + <br/>
2 \sum_{k=1}^m C_{m-2}^{k-2} \\<br/>
&amp;{} + (m-1)(m-2) \sum_{k=1}^m C_{m-3}^{k-2} + <br/>
(m-1) \sum_{k=1}^m C_{m-2}^{k-1} \\<br/>
{}={}<br/>
&amp; (m-2)(m-3) \cdot 2^{m-4} + 4 (m-2) \cdot 2^{m-3} + 2 \cdot 2^{m-2} \\<br/>
&amp;{} + (m-1)(m-2) \cdot 2^{m-3} + (m-1) 2^{m-2} \\<br/>
{}={}<br/>
&amp; 2^{m-4} [(m-2)(m-3) + 8(m-2) + 8 + 2(m-1)(m-2) + 4(m-1)] \\<br/>
{}={}<br/>
&amp; (3m^2 + m - 2) \cdot 2^{m-4}<br/>
\end{aligned}<br/>
\]</p>

<p>\[<br/>
\begin{aligned}<br/>
\sum_{k=1}^n \left( \frac kn \cdot \sum_{m=k}^n f(k,m) \right)<br/>
&amp;= \sum_{k=1}^n \left( \frac kn \cdot \sum_{m=k}^n \left( C_{m-2}^{k-2} \cdot (k-1) + C_{m-1}^k \cdot k \right) \right) \\<br/>
&amp;= \frac1n \cdot \sum_{k=1}^n \sum_{m=k}^n \left( k \cdot \left( C_{m-2}^{k-2} \cdot (k-1) + C_{m-1}^k \cdot k \right) \right) \\<br/>
&amp;= \frac1n \cdot \sum_{m=1}^n \sum_{k=1}^m \left( k \cdot \left( C_{m-2}^{k-2} \cdot (k-1) + C_{m-1}^k \cdot k \right) \right) \\<br/>
&amp;= \frac1n \cdot \sum_{m=2}^n (3m^2 + m - 2) \cdot 2^{m-4}<br/>
\end{aligned}<br/>
\]<br/>
设数列 \(S_n\) 满足 \(S_n = (x n^2 + yn + z) \cdot 2^{n-4}\) 且<br/>
\[<br/>
S_{m+1} - S_m = (3m^2 + m - 2) \cdot 2^{m-4}<br/>
\]<br/>
而<br/>
\[<br/>
\begin{aligned}<br/>
S_{m+1} - S_m <br/>
&amp;= [x(m+1)^2 + y(m+1) + z] \cdot 2^{m-3} - (xm^2 + ym + z) \cdot 2^{m-4} \\<br/>
&amp;= [2x(m+1)^2 + 2y(m+1) + 2z - (xm^2 + ym + z) ] \cdot 2^{m-4} \\<br/>
&amp;= [x m^2 + (4x+y) m + (2x + 2y + z)] \cdot 2^{m-4}<br/>
\end{aligned}<br/>
\]<br/>
因此 <br/>
\[<br/>
\begin{cases}<br/>
x = 3 \\<br/>
4x+y = 1 \\<br/>
2x+2y+z = -2<br/>
\end{cases}<br/>
\]<br/>
解得<br/>
\[<br/>
\begin{cases}<br/>
x = 3 \\<br/>
y = -11 \\<br/>
z = 14<br/>
\end{cases}<br/>
\]<br/>
也就是说, 令 \(S_n = (3n^2 - 11 n + 14) \cdot 2^{n-4}\), 即有<br/>
\[<br/>
S_{m+1} - S_m = (3m^2 + m - 2) \cdot 2^{m-4}<br/>
\]</p>

<p>那么<br/>
\[<br/>
\begin{aligned}<br/>
\sum_{m=2}^n (3m^2 + m - 2) \cdot 2^{m-4} <br/>
&amp;= \sum_{m=2}^n (S_{m+1} - S_n) \\<br/>
&amp;= S_{n+1} - S_2 \\<br/>
&amp;= (3n^2 - 5n + 6) \cdot 2^{n-3} - 1<br/>
\end{aligned}<br/>
\]</p>

<p>\[<br/>
[3(n+1)^2 - 11(n+1)+ 14] \cdot 2^{n-3} - 1 \\<br/>
(3n^2 - 5n + 6) \cdot 2^{n-3} - 1<br/>
\]</p>


    

      </div>

      <div class="row">
        <div class="large-6 columns">
        <p class="text-left" style="padding:15px 0px;">
      
          <a href="15840603466913.html" 
          title="Previous Post: 一个来自 QQ 群的问题 20200317-0721">&laquo; 一个来自 QQ 群的问题 20200317-0721</a>
      
        </p>
        </div>
        <div class="large-6 columns">
      <p class="text-right" style="padding:15px 0px;">
      
          <a  href="15490078791835.html" 
          title="Next Post: xieshunfu 20190201">xieshunfu 20190201 &raquo;</a>
      
      </p>
        </div>
      </div>
      <div class="comments-wrap">
        <div class="share-comments">
          

          

          
        </div>
      </div>
    </div><!-- article-wrap -->
  </div><!-- large 8 -->




 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <div class="site-a-logo"><img src="https://i.loli.net/2020/02/26/hjpG5rStAgRYm9P.jpg" /></div>
            
                <h1>语时lab</h1>
                <div class="site-des">Gnoloac 发文的地方</div>
                <div class="social">







<a target="_blank" class="weibo" href="https://weibo.com/gnoloac" title="weibo">Weibo</a>

<a target="_blank" class="github" target="_blank" href="https://github.com/cshishaliu" title="GitHub">GitHub</a>
<a target="_blank" class="email" href="mailto:cshishaliu@163.com" title="Email">Email</a>
  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
        
            <a href="%E7%AD%94%E7%96%91&%E8%A7%A3%E9%A2%98.html"><strong>答疑&解题</strong></a>
        
            <a href="To%20be%20accomplished.html"><strong>To be accomplished</strong></a>
        
            <a href="To%20be%20fixed.html"><strong>To be fixed</strong></a>
        
            <a href="Long%20long%20ago.html"><strong>Long long ago</strong></a>
        
            <a href="misc.html"><strong>misc</strong></a>
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="book.html">Books</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="links.html">Links</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15840603466913.html">一个来自 QQ 群的问题 20200317-0721</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15582753348629.html">qiqi 20200313</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15490078791835.html">xieshunfu 20190201</a>
			      </li>
		     
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
</div>

        </section>
      </div>
    </div>

  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>

    <script src="asset/chart/all-min.js"></script><script type="text/javascript">$(function(){    var mwebii=0;    var mwebChartEleId = 'mweb-chart-ele-';    $('pre>code').each(function(){        mwebii++;        var eleiid = mwebChartEleId+mwebii;        if($(this).hasClass('language-sequence')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = Diagram.parse($(this).text());            diagram.drawSVG(eleiid,{theme: 'simple'});        }else if($(this).hasClass('language-flow')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = flowchart.parse($(this).text());            diagram.drawSVG(eleiid);        }    });});</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS_SVG-full"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>


  </body>
</html>
